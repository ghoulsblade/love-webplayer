<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Love2D-Webplayer</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<link rel="stylesheet" href="../style.css" type="text/css">

<script type="text/javascript" src="../js/lua-parser.js"		></script>
<script type="text/javascript" src="../js/gamepad.js"      ></script>
<script type="text/javascript" src="../js/jquery.js"      ></script>
<script type="text/javascript" src="../js/jquery.hotkeys.js"      ></script>
<script type="text/javascript" src="../js/utils.js"			></script>
<script type="text/javascript" src="../js/utils.webgl.js"		></script>
<script type="text/javascript" src="../js/love.render.js"		></script>
<script type="text/javascript" src="../js/main.js"			></script>

<script type="text/javascript" src="../js/love.audio.js"		></script>
<script type="text/javascript" src="../js/love.event.js"		></script>
<script type="text/javascript" src="../js/love.filesystem.js"	></script>
<script type="text/javascript" src="../js/love.font.js"		></script>
<script type="text/javascript" src="../js/love.graphics.js"	></script>
<script type="text/javascript" src="../js/love.image.js"		></script>
<script type="text/javascript" src="../js/love.joystick.js"	></script>
<script type="text/javascript" src="../js/love.keyboard.js"	></script>
<script type="text/javascript" src="../js/love.mouse.js"		></script>
<script type="text/javascript" src="../js/love.physics.js"	></script>
<script type="text/javascript" src="../js/love.sound.js"		></script>
<script type="text/javascript" src="../js/love.thread.js"		></script>
<script type="text/javascript" src="../js/love.timer.js"		></script>



<script id="shader-fs" type="x-shader/x-fragment">
  #ifdef GL_ES
  precision highp float;
  #endif
  // old: precision mediump float;
  // old: uniform vec4 u_MaterialColor;

  varying vec2 vTextureCoord;
  //~ varying vec3 vLightWeighting;

  uniform sampler2D uSampler;
  uniform vec4 uMaterialColor;

  void main(void) {
     vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
	 //~ if (textureColor.a < .5) discard;
	 if (textureColor.a <= .0) discard;
     //~ gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
     gl_FragColor = vec4(textureColor.rgb * uMaterialColor.rgb, textureColor.a * uMaterialColor.a);
     //~ gl_FragColor = vec4(textureColor.rgb * uMaterialColor.rgb,textureColor.a * 200.0/255.0);
     //~ gl_FragColor = vec4(textureColor.rgb, 0.5);
     //~ gl_FragColor = textureColor * uMaterialColor;
     //~ gl_FragColor = uMaterialColor;
     //~ gl_FragColor = vec4(textureColor.rgb, 0.5);
     //~ gl_FragColor = vec4(0,1,0,0.5);
	//~ old: vec4 color = texture2D(sampler2d, v_texCoord);
	//~ old: if (color.a < .5) discard;
	//~ old: gl_FragColor = color * u_MaterialColor;
  }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
  attribute vec3 aVertexPosition;
  //~ attribute vec3 aVertexNormal;
  attribute vec2 aTextureCoord;

  uniform mat4 uMVMatrix;
  uniform mat4 uPMatrix;
  uniform mat4 uNMatrix;

  uniform vec3 uTranslate; // particles
  uniform vec3 uAmbientColor;

  uniform vec3 uLightingDirection;
  uniform vec3 uDirectionalColor;

  uniform bool uUseLighting;

  varying vec2 vTextureCoord;
  //~ varying vec3 vLightWeighting;

  void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(uTranslate + aVertexPosition, 1.0);
    //~ gl_Position = vec4(uTranslate + aVertexPosition, 1.0);
    vTextureCoord = aTextureCoord;

    //~ if (!uUseLighting) {
      //~ vLightWeighting = vec3(1.0, 1.0, 1.0);
    //~ } else {
      //~ vec4 transformedNormal = uNMatrix * vec4(aVertexNormal, 1.0);
      //~ float directionalLightWeighting = max(dot(transformedNormal.xyz, uLightingDirection), 0.0);
      //~ vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
      //~ vLightWeighting = uAmbientColor;
    //~ }
  }
</script>


</head>
<body onload='MainOnLoad()'>
<a href="https://github.com/ghoulsblade/love-webplayer">Love2D-Webplayer</a><br>
<canvas id="glcanvas" width="640" height="480">  
Your browser doesn't appear to support the HTML5 <code>&lt;canvas&gt;</code> element.  
</canvas>
<div id="output" style="font-family: Courier New,Courier,monospace;"></div>
</body></html>
